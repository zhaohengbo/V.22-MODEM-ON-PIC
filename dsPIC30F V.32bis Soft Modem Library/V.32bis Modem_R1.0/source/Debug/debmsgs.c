/******************************************************************************
;  Filename:               debmsgs.c                                          *
;  Date:                   26th July,2003                                     *
;                                                                             *
;  Tools used:             MPLAB IDE -> 6.43.00.0                             *
;                          Language tools -> 1.20.01                          *
;                                                                             *
;  Linker File:            p30f6014.gld                                       *
;                                                                             *
;******************************************************************************
;  Notes:                                                                     *
;  ======                                                                     *
;  Soft-Modem debug messages for LCD display are defined. LCD function is     *
;  invoked to send the required message to the LCD panel.                     *
;*****************************************************************************/

/*----------------------------------------------------------------------------
;    INCLUDE FILES
;----------------------------------------------------------------------------*/

#include "options.h"

/*************************************************************************/
/*************************************************************************/

#ifdef DEF_LCD_MSGS

/*************************************************************************/
/*************************************************************************/

int DebugMsgBufPtr;
int DebugMsgIndexBufPtr;
const char DebugMsgBuf[] __attribute__ ((__section__ (".text"), __space__(__prog__))) = 
{

'V','8','_','S','I','L','E','N','C','E','_','T','X',0,    //0
'V','8','_','S','E','N','D','_','C','M',0,               //14
'V','8','_','D','E','T','E','C','T','_','J','M',0,       //25 
'V','8','_','C','J','_','T','X',0,                       //38
'V','8','_','C','M','_','D','E','T','E','C','T',0,       //47 
'V','8','_','S','E','N','D','_','J','M',0,               //60
'V','8','_','D','E','T','E','C','T','_','C','J',0,       //71 
'V','3','2','O','R','G','_','S','T','A','R','T',0,       //84
'V','3','2','_','S','T','A','R','T','_','A','A',0,      //97
'V','3','2','_','D','E','T','E','C','T','_','A','C',0,  //110 
'V','3','2','_','D','E','T','E','C','T','_','A','C','2','C','A',0,  //124
'V','3','2','_','T','X','_','A','A','2','C','C',0,                  //141
'V','3','2','_','D','E','T','E','C','T','_','C','A','2','A','C',0,  //154 
'V','3','2','_','T','X','_','S','I','L','E','N','C','E',0,          //171
'V','3','2','_','D','E','T','_','A','C','_','D','R','O','P',0,      //186
'V','3','2','_','D','E','T','E','C','T','_','T','R','N',0,          //202
'V','3','2','_','D','E','T','E','C','T','_','R','1',0,                //217
'V','3','2','_','T','X','_','E','C','_','T','R','N',0,                //231
'A','G','C','_','D','E','T','_','E','N','G','_','L','O','S','S',0,    //245
'V','3','2','_','T','X','_','R','A','T','E','2',0,                    //262
'V','3','2','_','D','E','T','E','C','T','_','R','3',0,                //275
'V','3','2','_','T','X','_','E',0,                                    //289
'V','3','2','_','D','E','T','E','C','T','_','E',0,                    //298
'V','3','2','_','C','O','N','N','E','C','T','_','9','6','0','0',0,    //312
'V','3','2','_','C','O','N','N','E','C','T','_','4','8','0','0',0,    //329
'V','3','2','_','A','N','S','_','S','T','A','R','T',0,                //346
'V','3','2','_','D','E','T','E','C','T','_','A','A',0,                //360
'V','3','2','_','T','X','_','A','C','2','C','A',0,                    //374
'V','3','2','_','D','E','T','E','C','T','_','A','A','2','C','C',0,    //387
'V','3','2','_','T','X','_','C','A','2','A','C',0,                    //403
'V','3','2','_','T','X','_','S','T','O','P','_','A','C',0,            //416
'V','3','2','_','T','X','_','R','A','T','E','1',0,                    //431
'V','3','2','_','D','E','T','E','C','T','_','R','2',0,                //444
'V','3','2','_','T','X','_','F','D','_','T','R','N',0,                //458
'V','3','2','_','T','X','_','R','A','T','E','3',0,                    //472
'V','2','2','_','O','R','G','_','S','T','A','R','T',0,                //485
'V','2','2','_','A','N','S','_','S','T','A','R','T',0,                //499
'V','2','2','_','S','E','N','D','U','N','S','C','R','A','M',0,        //513
'V','2','2','_','R','X','U','N','S','C','R','A','M',0,                //529
'V','2','2','_','S','E','N','D','S','1',0,                            //543
'V','2','2','_','S','E','N','D','1','2','0','0',0,                    //554
'V','2','2','_','R','E','C','E','I','V','E','S','1',0,                //567
'V','2','2','_','R','E','C','E','I','V','E','1','2','0','0',0,        //581
'V','2','2','_','S','E','N','D','2','4','0','0',0,                    //597
'V','2','2','_','R','X','D','S','C','R','A','M','O','N','E','S',0,    //610
'V','2','2','_','C','O','N','N','E','C','T','_','2','4','0','0',0,    //627
'V','2','2','_','C','O','N','N','E','C','T','_','1','2','0','0',0,    //644
'V','2','1','_','O','R','G','_','S','T','A','R','T',0,                //661
'V','2','1','_','A','N','S','_','S','T','A','R','T',0,                //675
'V','2','1','_','C','O','N','N','E','C','T','_','3','0','0',0,        //689
'V','2','3','_','O','R','G','_','S','T','A','R','T',0,                //705
'V','2','3','_','A','N','S','_','S','T','A','R','T',0,                //719
'V','2','3','_','C','O','N','N','E','C','T',0                        //733
};

/*************************************************************************/
/*************************************************************************/

const int DebugMsgIndexBuf[] __attribute__ ((__section__ (".text"), __space__(__prog__))) = 
{
0,14,25,38,47,60,71,
84,97,110,124,141,154,171,186,202,217,231,245,262,275,289,298,312,329,
346,360,374,387,403,416,431,444,458,472,
485,499,513,529,543,554,567,581,597,610,627,644,
661,675,689,
705,719,733
};

/*************************************************************************/
/*************************************************************************/

void InitDebugMsg(void)
{

    asm("push        w1");
    asm("push        w2");

    asm ("mov        #tblpage(_DebugMsgBuf),w2");  
    asm ("mov        w2, _TBLPAG");
    asm ("mov        #tbloffset(_DebugMsgBuf),w1");
    asm ("mov        w1, _DebugMsgBufPtr");

    asm ("mov        #tblpage(_DebugMsgIndexBuf),w2");  
    asm ("mov        w2, _TBLPAG");
    asm ("mov        #tbloffset(_DebugMsgIndexBuf),w1");
    asm ("mov        w1, _DebugMsgIndexBufPtr");

    asm("pop        w2");
    asm("pop        w1");
   
}

/*************************************************************************/
/*************************************************************************/

void DebugMsg(int ID)
{
    char LCDMsgString[20],Length;

    Length = GetSMString(DebugMsgIndexBufPtr,ID,DebugMsgBufPtr,&LCDMsgString[0]);
    home_clr();
    puts_lcd( ( char * ) &LCDMsgString[0], Length );
}

/*************************************************************************/
/*************************************************************************/

#endif


/*--------------------------------------------------------------------
             END OF FILE
---------------------------------------------------------------------*/
